(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){e.exports=n(63)},22:function(e,t,n){},24:function(e,t,n){},45:function(e,t,n){},47:function(e,t,n){},49:function(e,t,n){},51:function(e,t,n){},53:function(e,t,n){},55:function(e,t,n){},57:function(e,t,n){},59:function(e,t,n){},61:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(16),s=n.n(o),c=(n(22),n(2)),r=n(3),l=n(6),u=n(4),h=n(5),p=n(1),d=(n(24),n(8)),m=n.n(d),f="https://api.themoviedb.org/3",v={nowPlaying:"".concat(f,"/movie/now_playing"),movieGenres:"".concat(f,"/genre/movie/list"),config:"".concat(f,"/configuration")},g={api_key:"9f0bc88ff0ebfb84f9ac784e09241437"},b=(n(45),n(47),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(r.a)(t,[{key:"displayStuff",value:function(){}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"search-bar"},i.a.createElement("i",{className:"fa fa-search"}),i.a.createElement("input",{type:"text",placeholder:"Filter by name",value:this.props.filterValue,onChange:function(t){return e.props.onChange(t.target.value)}}))}}]),t}(a.Component)),O=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(r.a)(t,[{key:"displayStuff",value:function(){}},{key:"render",value:function(){return i.a.createElement("div",{className:"header"},i.a.createElement("div",{className:"logo-container"},i.a.createElement("img",{src:"./logo.png",alt:"logo"})),i.a.createElement("div",{className:"search-bar-container"},i.a.createElement(b,{onChange:this.props.onNameFilterChange})))}}]),t}(a.Component);n(49),n(51),n(53);var j=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={mouseDown:!1,touchStart:!1},n.onMouseMove=n.onMouseMove.bind(Object(p.a)(Object(p.a)(n))),n.onTouchMove=n.onTouchMove.bind(Object(p.a)(Object(p.a)(n))),n.onMouseUp=n.onMouseUp.bind(Object(p.a)(Object(p.a)(n))),n.onTouchEnd=n.onTouchEnd.bind(Object(p.a)(Object(p.a)(n))),n.callOnChange=n.callOnChange.bind(Object(p.a)(Object(p.a)(n))),n.lastMousePos=0,n.axisRef=i.a.createRef(),n}return Object(h.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("touchend",this.onTouchEnd),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove)}},{key:"onMouseUp",value:function(e){this.setState({mouseDown:!1})}},{key:"onTouchEnd",value:function(e){this.setState({mouseDown:!1})}},{key:"onMouseMove",value:function(e){if(this.state.mouseDown){var t=this.axisRef.current,n=t.offsetWidth,a=t.getBoundingClientRect().left,i=Math.round(e.screenX-a-5),o=(i=Math.min(n,Math.max(i,0)))/n;this.callOnChange(o)}}},{key:"callOnChange",value:function(e){if(this.props.onChange&&"function"===typeof this.props.onChange){var t=function(e,t){t=1/t;var n=Math.round(e*t)/t;return Math.floor(n)===n?Math.floor(n):n.toFixed(1)}(e*(this.props.max-this.props.min),this.props.step);this.props.onChange(t)}}},{key:"onTouchMove",value:function(e){if(this.state.touchStart){var t=this.axisRef.current,n=t.offsetWidth,a=t.getBoundingClientRect().left,i=Math.round(e.changedTouches[0].pageX-a-5),o=(i=Math.min(n,Math.max(i,0)))/n;this.callOnChange(o)}}},{key:"render",value:function(){var e=this,t=this.props.value/(this.props.max-this.props.min)*100;return i.a.createElement("div",{className:"range-slider"},i.a.createElement("div",{className:"cursor",style:{left:"".concat(t,"%")},onMouseDown:function(t){return e.setState({mouseDown:!0})},onTouchStart:function(t){return e.setState({touchStart:!0})}}),i.a.createElement("div",{className:"tooltip",style:{left:"".concat(t,"%")}},this.props.value),i.a.createElement("div",{className:"axis",ref:this.axisRef}),i.a.createElement("div",{className:"axis-highlight",style:{width:"".concat(t,"%")}}),i.a.createElement("label",{className:"min"},this.props.min),i.a.createElement("label",{className:"max"},this.props.max))}}]),t}(a.Component),k=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"rating-filter"},i.a.createElement("p",{className:"label"}),i.a.createElement(j,{min:0,max:10,step:.5,value:this.props.minRating,onChange:this.props.onChange}))}}]),t}(a.Component),y=(n(55),n(57),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={checked:!1},e.onClick=e.onClick.bind(Object(p.a)(Object(p.a)(e))),e.onKeyDown=e.onKeyDown.bind(Object(p.a)(Object(p.a)(e))),e.toggle=e.toggle.bind(Object(p.a)(Object(p.a)(e))),e}return Object(h.a)(t,e),Object(r.a)(t,[{key:"onClick",value:function(e){e.target&&"A"===e.target.tagName||this.toggle(e)}},{key:"toggle",value:function(e){var t;this.props.hasOwnProperty("checked")?t=!this.props.checked:(t=!this.state.checked,this.setState({checked:t})),this.props.onCheck&&"function"===typeof this.props.onCheck&&this.props.onCheck(e,t)}},{key:"onKeyDown",value:function(e){13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),this.toggle(e))}},{key:"render",value:function(){var e="checkbox ".concat(this.props.className||"");return(this.props.hasOwnProperty("checked")?this.props.checked:this.state.checked)&&(e+=" checked"),i.a.createElement("div",{onClick:this.onClick,className:e},i.a.createElement("div",{tabIndex:0,className:"checkbox-inside",onKeyDown:this.onKeyDown},i.a.createElement("i",{className:"fa fa-check"})),i.a.createElement("label",null,this.props.label))}}]),t}(a.Component)),E=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(r.a)(t,[{key:"displayStuff",value:function(){}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"genre-item"},i.a.createElement(y,{checked:this.props.checked,onCheck:function(){return e.props.onCheck(e.props)},label:this.props.name}))}}]),t}(a.Component),C=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).displayGenres=n.displayGenres.bind(Object(p.a)(Object(p.a)(n))),n}return Object(h.a)(t,e),Object(r.a)(t,[{key:"displayGenres",value:function(){var e=this;return this.props.genres.map(function(t){return i.a.createElement(E,Object.assign({key:t.id},t,{onCheck:e.props.onGenreCheck}))})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("p",null,"Genres:"),i.a.createElement("ul",{className:"genres-filter"},this.displayGenres()))}}]),t}(a.Component),w=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"sidebar"},i.a.createElement(k,{minRating:this.props.minRating,onChange:this.props.onMinRatingChange}),i.a.createElement(C,{genres:this.props.genres,onGenreCheck:this.props.onGenreCheck}))}}]),t}(a.Component),N=(n(59),n(61),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={imageLoaded:!1},n.displayGenres=n.displayGenres.bind(Object(p.a)(Object(p.a)(n))),n}return Object(h.a)(t,e),Object(r.a)(t,[{key:"displayGenres",value:function(){var e=this;return this.props.genres.filter(function(t){return e.props.data.genre_ids.includes(t.id)}).map(function(e){return e.name}).join(", ")}},{key:"render",value:function(){var e,t,n=this;return i.a.createElement("div",{className:"movie-item ".concat(this.state.imageLoaded?"loaded":"")},i.a.createElement("span",{className:"rating"},this.props.data.vote_average),i.a.createElement("img",{className:"poster-image",src:(e=this.props.data.poster_path,t=this.props.config,t?"".concat(t.secure_base_url).concat(t.poster_sizes[4]).concat(e):null),alt:"poster-".concat(this.props.data.title),onLoad:function(){return n.setState({imageLoaded:!0})}}),i.a.createElement("svg",{className:"poster-image-placeholder",viewBox:"0 0 500 750",version:"1.1"},i.a.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.a.createElement("g",{id:"Artboard",fill:"#353D42",fillRule:"nonzero"},i.a.createElement("rect",{id:"Rectangle",x:"0",y:"0",width:"500",height:"750"})))),i.a.createElement("div",{className:"info"},i.a.createElement("p",{className:"title"},this.props.data.title),i.a.createElement("p",{className:"genres"},this.displayGenres())))}}]),t}(a.Component)),M=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).displayMovies=n.displayMovies.bind(Object(p.a)(Object(p.a)(n))),n.getFilteredList=n.getFilteredList.bind(Object(p.a)(Object(p.a)(n))),n}return Object(h.a)(t,e),Object(r.a)(t,[{key:"displayMovies",value:function(e){var t=this;return e.sort(function(e,t){return t.popularity-e.popularity}).map(function(e){return i.a.createElement(N,{key:e.id,data:e,config:t.props.config,genres:t.props.genres})})}},{key:"getFilteredList",value:function(){var e=this;return this.props.movies.filter(function(t){var n=t.vote_average>=e.props.minRating,a=!0,i=!0,o=e.props.genres.filter(function(e){return e.checked});return e.props.nameFilter.length>0&&(i=t.title.toLowerCase().includes(e.props.nameFilter.toLowerCase())),o.length>0&&o.forEach(function(e){var n=e.id;t.genre_ids.includes(n)||(a=!1)}),a&&n&&i})}},{key:"render",value:function(){var e=this.getFilteredList(),t="Films showing right now";return 0===e.length&&(t="No movies match your search"),i.a.createElement("div",{className:"movie-list-container"},i.a.createElement("h1",{className:"title"},t),i.a.createElement("div",{className:"movie-list"},this.displayMovies(e)))}}]),t}(a.Component);m.a.defaults.params=g;var x=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={genres:null,movies:null,config:null,minRating:3,nameFilter:"",sidebarExpanded:!1},n.fetchData=n.fetchData.bind(Object(p.a)(Object(p.a)(n))),n.onGenreCheck=n.onGenreCheck.bind(Object(p.a)(Object(p.a)(n))),n}return Object(h.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=this;m.a.get(v.config).then(function(t){var n=t.data;e.setState({config:n.images})}),m.a.get(v.nowPlaying).then(function(t){var n=t.data;e.setState({movies:n.results},function(){})}),m.a.get(v.movieGenres).then(function(t){var n=t.data;e.setState({genres:n.genres})})}},{key:"onGenreCheck",value:function(e){console.log("onGenreCheck() data = ",e);var t=JSON.parse(JSON.stringify(this.state.genres));t.forEach(function(t){t.id===e.id&&(console.log("found:",t),t.checked=!t.checked)}),this.setState({genres:t})}},{key:"render",value:function(){var e=this;return this.state.config&&this.state.movies&&this.state.genres?i.a.createElement("div",{className:"app ".concat(this.state.sidebarExpanded?"sidebar-expanded":"")},i.a.createElement(O,{onNameFilterChange:function(t){return e.setState({nameFilter:t})}}),i.a.createElement("div",{className:"main-content"},i.a.createElement(w,{genres:this.state.genres,onGenreCheck:this.onGenreCheck,minRating:this.state.minRating,onMinRatingChange:function(t){e.setState({minRating:t})}}),i.a.createElement(M,{movies:this.state.movies,config:this.state.config,genres:this.state.genres,minRating:this.state.minRating,nameFilter:this.state.nameFilter}),i.a.createElement("button",{className:"expand",onClick:function(){return e.setState({sidebarExpanded:!e.state.sidebarExpanded})}},i.a.createElement("i",{className:"fa fa-chevron-down"})))):i.a.createElement("p",null,"Loading...")}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[17,2,1]]]);
//# sourceMappingURL=main.8cd36b74.chunk.js.map